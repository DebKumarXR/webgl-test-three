var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequiree52e;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},e.parcelRequiree52e=n);var i=n("ilwiq"),s=(i=n("ilwiq"),n("jiuw3"));const a=new(0,(i=n("ilwiq")).Raycaster),r=new(0,i.Vector3),l=new(0,i.Vector3),h=new(0,i.Quaternion),c={X:new(0,i.Vector3)(1,0,0),Y:new(0,i.Vector3)(0,1,0),Z:new(0,i.Vector3)(0,0,1)},p={type:"change"},d={type:"mouseDown"},u={type:"mouseUp",mode:null},m={type:"objectChange"};class w extends i.Object3D{constructor(e,t){super(),void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const o=new V;this._gizmo=o,this.add(o);const n=new L;this._plane=n,this.add(n);const s=this;function a(e,t){let i=t;Object.defineProperty(s,e,{get:function(){return void 0!==i?i:t},set:function(t){i!==t&&(i=t,n[e]=t,o[e]=t,s.dispatchEvent({type:e+"-changed",value:t}),s.dispatchEvent(p))}}),s[e]=t,n[e]=t,o[e]=t}a("camera",e),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0);const r=new(0,i.Vector3),l=new(0,i.Vector3),h=new(0,i.Quaternion),c=new(0,i.Quaternion),d=new(0,i.Vector3),u=new(0,i.Quaternion),m=new(0,i.Vector3),w=new(0,i.Vector3),x=new(0,i.Vector3),S=new(0,i.Vector3);a("worldPosition",r),a("worldPositionStart",l),a("worldQuaternion",h),a("worldQuaternionStart",c),a("cameraPosition",d),a("cameraQuaternion",u),a("pointStart",m),a("pointEnd",w),a("rotationAxis",x),a("rotationAngle",0),a("eye",S),this._offset=new(0,i.Vector3),this._startNorm=new(0,i.Vector3),this._endNorm=new(0,i.Vector3),this._cameraScale=new(0,i.Vector3),this._parentPosition=new(0,i.Vector3),this._parentQuaternion=new(0,i.Quaternion),this._parentQuaternionInv=new(0,i.Quaternion),this._parentScale=new(0,i.Vector3),this._worldScaleStart=new(0,i.Vector3),this._worldQuaternionInv=new(0,i.Quaternion),this._worldScale=new(0,i.Vector3),this._positionStart=new(0,i.Vector3),this._quaternionStart=new(0,i.Quaternion),this._scaleStart=new(0,i.Vector3),this._getPointer=y.bind(this),this._onPointerDown=b.bind(this),this._onPointerHover=M.bind(this),this._onPointerMove=g.bind(this),this._onPointerUp=f.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(void 0===this.object||!0===this.dragging)return;a.setFromCamera(e,this.camera);const t=x(this._gizmo.picker[this.mode],a);this.axis=t?t.object.name:null}pointerDown(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){a.setFromCamera(e,this.camera);const t=x(this._plane,a,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,d.mode=this.mode,this.dispatchEvent(d)}}pointerMove(e){const t=this.axis,o=this.mode,n=this.object;let i=this.space;if("scale"===o?i="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(i="world"),void 0===n||null===t||!1===this.dragging||-1!==e.button)return;a.setFromCamera(e,this.camera);const s=x(this._plane,a,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),"translate"===o)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===i&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===i&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),n.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===i&&(n.position.applyQuaternion(h.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.position.applyQuaternion(this._quaternionStart)),"world"===i&&(n.parent&&n.position.add(r.setFromMatrixPosition(n.parent.matrixWorld)),-1!==t.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.parent&&n.position.sub(r.setFromMatrixPosition(n.parent.matrixWorld))));else if("scale"===o){if(-1!==t.search("XYZ")){let e=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(e*=-1),l.set(e,e,e)}else r.copy(this.pointStart),l.copy(this.pointEnd),r.applyQuaternion(this._worldQuaternionInv),l.applyQuaternion(this._worldQuaternionInv),l.divide(r),-1===t.search("X")&&(l.x=1),-1===t.search("Y")&&(l.y=1),-1===t.search("Z")&&(l.z=1);n.scale.copy(this._scaleStart).multiply(l),this.scaleSnap&&(-1!==t.search("X")&&(n.scale.x=Math.round(n.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(n.scale.y=Math.round(n.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(n.scale.z=Math.round(n.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===o){this._offset.copy(this.pointEnd).sub(this.pointStart);const e=20/this.worldPosition.distanceTo(r.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(r.copy(this.rotationAxis).cross(this.eye))*e):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(c[t]),r.copy(c[t]),"local"===i&&r.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(r.cross(this.eye).normalize())*e),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===i&&"E"!==t&&"XYZE"!==t?(n.quaternion.copy(this._quaternionStart),n.quaternion.multiply(h.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),n.quaternion.copy(h.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),n.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(p),this.dispatchEvent(m)}}pointerUp(e){0===e.button&&(this.dragging&&null!==this.axis&&(u.mode=this.mode,this.dispatchEvent(u)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(p),this.dispatchEvent(m),this.pointStart.copy(this.pointEnd))}getRaycaster(){return a}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function y(e){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};{const t=this.domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1,button:e.button}}}function M(e){if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(e))}}function b(e){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(e)),this.pointerDown(this._getPointer(e)))}function g(e){this.enabled&&this.pointerMove(this._getPointer(e))}function f(e){this.enabled&&(this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(e)))}function x(e,t,o){const n=t.intersectObject(e,!0);for(let e=0;e<n.length;e++)if(n[e].object.visible||o)return n[e];return!1}const S=new(0,i.Euler),v=new(0,i.Vector3)(0,1,0),E=new(0,i.Vector3)(0,0,0),P=new(0,i.Matrix4),I=new(0,i.Quaternion),_=new(0,i.Quaternion),C=new(0,i.Vector3),T=new(0,i.Matrix4),A=new(0,i.Vector3)(1,0,0),G=new(0,i.Vector3)(0,1,0),B=new(0,i.Vector3)(0,0,1),Q=new(0,i.Vector3),O=new(0,i.Vector3),X=new(0,i.Vector3);class V extends i.Object3D{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new(0,i.MeshBasicMaterial)({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new(0,i.LineBasicMaterial)({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),o=e.clone();o.opacity=.15;const n=t.clone();n.opacity=.5;const s=e.clone();s.color.setHex(16711680);const a=e.clone();a.color.setHex(65280);const r=e.clone();r.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const h=e.clone();h.color.setHex(65280),h.opacity=.5;const c=e.clone();c.color.setHex(255),c.opacity=.5;const p=e.clone();p.opacity=.25;const d=e.clone();d.color.setHex(16776960),d.opacity=.25;e.clone().color.setHex(16776960);const u=e.clone();u.color.setHex(7895160);const m=new(0,i.CylinderGeometry)(0,.04,.1,12);m.translate(0,.05,0);const w=new(0,i.BoxGeometry)(.08,.08,.08);w.translate(0,.04,0);const y=new(0,i.BufferGeometry);y.setAttribute("position",new(0,i.Float32BufferAttribute)([0,0,0,1,0,0],3));const M=new(0,i.CylinderGeometry)(.0075,.0075,.5,3);function b(e,t){const o=new(0,i.TorusGeometry)(e,.0075,3,64,t*Math.PI*2);return o.rotateY(Math.PI/2),o.rotateX(Math.PI/2),o}M.translate(0,.25,0);const g={X:[[new(0,i.Mesh)(m,s),[.5,0,0],[0,0,-Math.PI/2]],[new(0,i.Mesh)(m,s),[-.5,0,0],[0,0,Math.PI/2]],[new(0,i.Mesh)(M,s),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new(0,i.Mesh)(m,a),[0,.5,0]],[new(0,i.Mesh)(m,a),[0,-.5,0],[Math.PI,0,0]],[new(0,i.Mesh)(M,a)]],Z:[[new(0,i.Mesh)(m,r),[0,0,.5],[Math.PI/2,0,0]],[new(0,i.Mesh)(m,r),[0,0,-.5],[-Math.PI/2,0,0]],[new(0,i.Mesh)(M,r),null,[Math.PI/2,0,0]]],XYZ:[[new(0,i.Mesh)(new(0,i.OctahedronGeometry)(.1,0),p.clone()),[0,0,0]]],XY:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.15,.15,.01),c.clone()),[.15,.15,0]]],YZ:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.15,.15,.01),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},f={X:[[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[.3,0,0],[0,0,-Math.PI/2]],[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[0,.3,0]],[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[0,-.3,0],[0,0,Math.PI]]],Z:[[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[0,0,.3],[Math.PI/2,0,0]],[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new(0,i.Mesh)(new(0,i.OctahedronGeometry)(.2,0),o)]],XY:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.2,.2,.01),o),[.15,.15,0]]],YZ:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.2,.2,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.2,.2,.01),o),[.15,0,.15],[-Math.PI/2,0,0]]]},x={START:[[new(0,i.Mesh)(new(0,i.OctahedronGeometry)(.01,2),n),null,null,null,"helper"]],END:[[new(0,i.Mesh)(new(0,i.OctahedronGeometry)(.01,2),n),null,null,null,"helper"]],DELTA:[[new(0,i.Line)(function(){const e=new(0,i.BufferGeometry);return e.setAttribute("position",new(0,i.Float32BufferAttribute)([0,0,0,1,1,1],3)),e}(),n),null,null,null,"helper"]],X:[[new(0,i.Line)(y,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new(0,i.Line)(y,n.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new(0,i.Line)(y,n.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},S={XYZE:[[new(0,i.Mesh)(b(.5,1),u),null,[0,Math.PI/2,0]]],X:[[new(0,i.Mesh)(b(.5,.5),s)]],Y:[[new(0,i.Mesh)(b(.5,.5),a),null,[0,0,-Math.PI/2]]],Z:[[new(0,i.Mesh)(b(.5,.5),r),null,[0,Math.PI/2,0]]],E:[[new(0,i.Mesh)(b(.75,1),d),null,[0,Math.PI/2,0]]]},v={AXIS:[[new(0,i.Line)(y,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},E={XYZE:[[new(0,i.Mesh)(new(0,i.SphereGeometry)(.25,10,8),o)]],X:[[new(0,i.Mesh)(new(0,i.TorusGeometry)(.5,.1,4,24),o),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new(0,i.Mesh)(new(0,i.TorusGeometry)(.5,.1,4,24),o),[0,0,0],[Math.PI/2,0,0]]],Z:[[new(0,i.Mesh)(new(0,i.TorusGeometry)(.5,.1,4,24),o),[0,0,0],[0,0,-Math.PI/2]]],E:[[new(0,i.Mesh)(new(0,i.TorusGeometry)(.75,.1,2,24),o)]]},P={X:[[new(0,i.Mesh)(w,s),[.5,0,0],[0,0,-Math.PI/2]],[new(0,i.Mesh)(M,s),[0,0,0],[0,0,-Math.PI/2]],[new(0,i.Mesh)(w,s),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new(0,i.Mesh)(w,a),[0,.5,0]],[new(0,i.Mesh)(M,a)],[new(0,i.Mesh)(w,a),[0,-.5,0],[0,0,Math.PI]]],Z:[[new(0,i.Mesh)(w,r),[0,0,.5],[Math.PI/2,0,0]],[new(0,i.Mesh)(M,r),[0,0,0],[Math.PI/2,0,0]],[new(0,i.Mesh)(w,r),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.15,.15,.01),c),[.15,.15,0]]],YZ:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.15,.15,.01),h),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.1,.1,.1),p.clone())]]},I={X:[[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[.3,0,0],[0,0,-Math.PI/2]],[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[0,.3,0]],[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[0,-.3,0],[0,0,Math.PI]]],Z:[[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[0,0,.3],[Math.PI/2,0,0]],[new(0,i.Mesh)(new(0,i.CylinderGeometry)(.2,0,.6,4),o),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.2,.2,.01),o),[.15,.15,0]]],YZ:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.2,.2,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.2,.2,.01),o),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new(0,i.Mesh)(new(0,i.BoxGeometry)(.2,.2,.2),o),[0,0,0]]]},_={X:[[new(0,i.Line)(y,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new(0,i.Line)(y,n.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new(0,i.Line)(y,n.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function C(e){const t=new(0,i.Object3D);for(const o in e)for(let n=e[o].length;n--;){const i=e[o][n][0].clone(),s=e[o][n][1],a=e[o][n][2],r=e[o][n][3],l=e[o][n][4];i.name=o,i.tag=l,s&&i.position.set(s[0],s[1],s[2]),a&&i.rotation.set(a[0],a[1],a[2]),r&&i.scale.set(r[0],r[1],r[2]),i.updateMatrix();const h=i.geometry.clone();h.applyMatrix4(i.matrix),i.geometry=h,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=C(g)),this.add(this.gizmo.rotate=C(S)),this.add(this.gizmo.scale=C(P)),this.add(this.picker.translate=C(f)),this.add(this.picker.rotate=C(E)),this.add(this.picker.scale=C(I)),this.add(this.helper.translate=C(x)),this.add(this.helper.rotate=C(v)),this.add(this.helper.scale=C(_)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:_;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let o=[];o=o.concat(this.picker[this.mode].children),o=o.concat(this.gizmo[this.mode].children),o=o.concat(this.helper[this.mode].children);for(let e=0;e<o.length;e++){const n=o[e];let i;if(n.visible=!0,n.rotation.set(0,0,0),n.position.copy(this.worldPosition),i=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),n.scale.set(1,1,1).multiplyScalar(i*this.size/4),"helper"!==n.tag){if(n.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){const e=.99,o=.2;"X"===n.name&&Math.abs(v.copy(A).applyQuaternion(t).dot(this.eye))>e&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"Y"===n.name&&Math.abs(v.copy(G).applyQuaternion(t).dot(this.eye))>e&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"Z"===n.name&&Math.abs(v.copy(B).applyQuaternion(t).dot(this.eye))>e&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"XY"===n.name&&Math.abs(v.copy(B).applyQuaternion(t).dot(this.eye))<o&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"YZ"===n.name&&Math.abs(v.copy(A).applyQuaternion(t).dot(this.eye))<o&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"XZ"===n.name&&Math.abs(v.copy(G).applyQuaternion(t).dot(this.eye))<o&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1)}else"rotate"===this.mode&&(I.copy(t),v.copy(this.eye).applyQuaternion(h.copy(t).invert()),-1!==n.name.search("E")&&n.quaternion.setFromRotationMatrix(P.lookAt(this.eye,E,G)),"X"===n.name&&(h.setFromAxisAngle(A,Math.atan2(-v.y,v.z)),h.multiplyQuaternions(I,h),n.quaternion.copy(h)),"Y"===n.name&&(h.setFromAxisAngle(G,Math.atan2(v.x,v.z)),h.multiplyQuaternions(I,h),n.quaternion.copy(h)),"Z"===n.name&&(h.setFromAxisAngle(B,Math.atan2(v.y,v.x)),h.multiplyQuaternions(I,h),n.quaternion.copy(h)));n.visible=n.visible&&(-1===n.name.indexOf("X")||this.showX),n.visible=n.visible&&(-1===n.name.indexOf("Y")||this.showY),n.visible=n.visible&&(-1===n.name.indexOf("Z")||this.showZ),n.visible=n.visible&&(-1===n.name.indexOf("E")||this.showX&&this.showY&&this.showZ),n.material._color=n.material._color||n.material.color.clone(),n.material._opacity=n.material._opacity||n.material.opacity,n.material.color.copy(n.material._color),n.material.opacity=n.material._opacity,this.enabled&&this.axis&&(n.name===this.axis||this.axis.split("").some((function(e){return n.name===e})))&&(n.material.color.setHex(16776960),n.material.opacity=1)}else n.visible=!1,"AXIS"===n.name?(n.visible=!!this.axis,"X"===this.axis&&(h.setFromEuler(S.set(0,0,0)),n.quaternion.copy(t).multiply(h),Math.abs(v.copy(A).applyQuaternion(t).dot(this.eye))>.9&&(n.visible=!1)),"Y"===this.axis&&(h.setFromEuler(S.set(0,0,Math.PI/2)),n.quaternion.copy(t).multiply(h),Math.abs(v.copy(G).applyQuaternion(t).dot(this.eye))>.9&&(n.visible=!1)),"Z"===this.axis&&(h.setFromEuler(S.set(0,Math.PI/2,0)),n.quaternion.copy(t).multiply(h),Math.abs(v.copy(B).applyQuaternion(t).dot(this.eye))>.9&&(n.visible=!1)),"XYZE"===this.axis&&(h.setFromEuler(S.set(0,Math.PI/2,0)),v.copy(this.rotationAxis),n.quaternion.setFromRotationMatrix(P.lookAt(E,v,G)),n.quaternion.multiply(h),n.visible=this.dragging),"E"===this.axis&&(n.visible=!1)):"START"===n.name?(n.position.copy(this.worldPositionStart),n.visible=this.dragging):"END"===n.name?(n.position.copy(this.worldPosition),n.visible=this.dragging):"DELTA"===n.name?(n.position.copy(this.worldPositionStart),n.quaternion.copy(this.worldQuaternionStart),r.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),r.applyQuaternion(this.worldQuaternionStart.clone().invert()),n.scale.copy(r),n.visible=this.dragging):(n.quaternion.copy(t),this.dragging?n.position.copy(this.worldPositionStart):n.position.copy(this.worldPosition),this.axis&&(n.visible=-1!==this.axis.search(n.name)))}super.updateMatrixWorld(e)}}class L extends i.Mesh{constructor(){super(new(0,i.PlaneGeometry)(1e5,1e5,2,2),new(0,i.MeshBasicMaterial)({visible:!1,wireframe:!0,side:i.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),Q.copy(A).applyQuaternion("local"===t?this.worldQuaternion:_),O.copy(G).applyQuaternion("local"===t?this.worldQuaternion:_),X.copy(B).applyQuaternion("local"===t?this.worldQuaternion:_),v.copy(O),this.mode){case"translate":case"scale":switch(this.axis){case"X":v.copy(this.eye).cross(Q),C.copy(Q).cross(v);break;case"Y":v.copy(this.eye).cross(O),C.copy(O).cross(v);break;case"Z":v.copy(this.eye).cross(X),C.copy(X).cross(v);break;case"XY":C.copy(X);break;case"YZ":C.copy(Q);break;case"XZ":v.copy(X),C.copy(O);break;case"XYZ":case"E":C.set(0,0,0)}break;default:C.set(0,0,0)}0===C.length()?this.quaternion.copy(this.cameraQuaternion):(T.lookAt(r.set(0,0,0),C,v),this.quaternion.setFromRotationMatrix(T)),super.updateMatrixWorld(e)}}var Y=n("5Rd1x");i=n("ilwiq");class z extends i.BufferGeometry{constructor(e,t,o,n){super();const s=[],a=[],r=[],l=new(0,i.Vector3),h=new(0,i.Matrix4);h.makeRotationFromEuler(o),h.setPosition(t);const c=new(0,i.Matrix4);function p(t,o,n){o.applyMatrix4(e.matrixWorld),o.applyMatrix4(c),n.transformDirection(e.matrixWorld),t.push(new Z(o.clone(),n.clone()))}function d(e,t){const o=[],i=.5*Math.abs(n.dot(t));for(let n=0;n<e.length;n+=3){let s,a,r,l,h=0;const c=e[n+0].position.dot(t)-i>0,p=e[n+1].position.dot(t)-i>0,d=e[n+2].position.dot(t)-i>0;switch(h=(c?1:0)+(p?1:0)+(d?1:0),h){case 0:o.push(e[n]),o.push(e[n+1]),o.push(e[n+2]);break;case 1:if(c&&(s=e[n+1],a=e[n+2],r=u(e[n],s,t,i),l=u(e[n],a,t,i)),p){s=e[n],a=e[n+2],r=u(e[n+1],s,t,i),l=u(e[n+1],a,t,i),o.push(r),o.push(a.clone()),o.push(s.clone()),o.push(a.clone()),o.push(r.clone()),o.push(l);break}d&&(s=e[n],a=e[n+1],r=u(e[n+2],s,t,i),l=u(e[n+2],a,t,i)),o.push(s.clone()),o.push(a.clone()),o.push(r),o.push(l),o.push(r.clone()),o.push(a.clone());break;case 2:c||(s=e[n].clone(),a=u(s,e[n+1],t,i),r=u(s,e[n+2],t,i),o.push(s),o.push(a),o.push(r)),p||(s=e[n+1].clone(),a=u(s,e[n+2],t,i),r=u(s,e[n],t,i),o.push(s),o.push(a),o.push(r)),d||(s=e[n+2].clone(),a=u(s,e[n],t,i),r=u(s,e[n+1],t,i),o.push(s),o.push(a),o.push(r))}}return o}function u(e,t,o,n){const s=e.position.dot(o)-n,a=s/(s-(t.position.dot(o)-n));return new Z(new(0,i.Vector3)(e.position.x+a*(t.position.x-e.position.x),e.position.y+a*(t.position.y-e.position.y),e.position.z+a*(t.position.z-e.position.z)),new(0,i.Vector3)(e.normal.x+a*(t.normal.x-e.normal.x),e.normal.y+a*(t.normal.y-e.normal.y),e.normal.z+a*(t.normal.z-e.normal.z)))}c.copy(h).invert(),function(){let t=[];const o=new(0,i.Vector3),c=new(0,i.Vector3),u=e.geometry,m=u.attributes.position,w=u.attributes.normal;if(null!==u.index){const e=u.index;for(let n=0;n<e.count;n++)o.fromBufferAttribute(m,e.getX(n)),c.fromBufferAttribute(w,e.getX(n)),p(t,o,c)}else for(let e=0;e<m.count;e++)o.fromBufferAttribute(m,e),c.fromBufferAttribute(w,e),p(t,o,c);t=d(t,l.set(1,0,0)),t=d(t,l.set(-1,0,0)),t=d(t,l.set(0,1,0)),t=d(t,l.set(0,-1,0)),t=d(t,l.set(0,0,1)),t=d(t,l.set(0,0,-1));for(let e=0;e<t.length;e++){const o=t[e];r.push(.5+o.position.x/n.x,.5+o.position.y/n.y),o.position.applyMatrix4(h),s.push(o.position.x,o.position.y,o.position.z),a.push(o.normal.x,o.normal.y,o.normal.z)}}(),this.setAttribute("position",new(0,i.Float32BufferAttribute)(s,3)),this.setAttribute("normal",new(0,i.Float32BufferAttribute)(a,3)),this.setAttribute("uv",new(0,i.Float32BufferAttribute)(r,2))}}class Z{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}var F=n("7lx9d"),W=n("kp7Te"),H=n("8Zfx2"),k=n("4CEV9");window.logTriangleDefinitions=k.logTriangleDefinitions;const D={brush1Shape:"box",brush1Complexity:1,brush1Color:"#ffffff",brush2Shape:"sphere",brush2Complexity:1,brush2Color:"#E91E63",operation:k.SUBTRACTION,wireframe:!1,displayBrushes:!0,displayControls:!0,shadows:!1,vertexColors:!1,flatShading:!1,gridTexture:!1,useGroups:!0,enableDebugTelemetry:!0,displayIntersectionEdges:!1,displayTriangleIntersections:!1,displayBrush1BVH:!1,displayBrush2BVH:!1,minScale:10,maxScale:20,rotate:!0,clear:function(){Ie.forEach((function(e){ye.remove(e)})),Ie.length=0}};let R,N,j,q,U,K,$,J,ee,te,oe,ne,ie,se,ae,re,le,he,ce,pe,de,ue,me=!0;const we=new Map;let ye,Me,be;const ge={intersects:!1,point:new i.Vector3,normal:new i.Vector3},fe=new i.Vector2,xe=[],Se=new i.TextureLoader,ve=Se.load("/textures/decal/decal-diffuse.png");ve.colorSpace=i.SRGBColorSpace;const Ee=Se.load("/textures/decal/decal-normal.jpg"),Pe=new i.MeshPhongMaterial({specular:4473924,map:ve,normalMap:Ee,normalScale:new i.Vector2(1,1),shininess:30,transparent:!0,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:-4,wireframe:!1}),Ie=[];let _e;const Ce=new i.Vector3,Te=new i.Euler,Ae=new i.Vector3(10,10,10);function Ge(e,t,o,n){switch(e.geometry.dispose(),t){case"sphere":e.geometry=new(0,i.SphereGeometry)(1,Math.round(i.MathUtils.lerp(5,32,o)),Math.round(i.MathUtils.lerp(5,16,o)));break;case"box":const t=Math.round(i.MathUtils.lerp(1,10,o));e.geometry=new(0,i.BoxGeometry)(1,1,1,t,t,t);break;case"cylinder":e.geometry=new(0,i.CylinderGeometry)(.5,.5,1,Math.round(i.MathUtils.lerp(5,32,o)));break;case"torus":e.geometry=new(0,i.TorusGeometry)(.6,.2,Math.round(i.MathUtils.lerp(4,16,o)),Math.round(i.MathUtils.lerp(6,30,o)));break;case"torus knot":e.geometry=new(0,i.TorusKnotGeometry)(.6,.2,Math.round(i.MathUtils.lerp(16,64,o)),Math.round(i.MathUtils.lerp(4,16,o)));break;case"mesh":e.geometry=n.clone()}e.geometry=e.geometry.toNonIndexed();const s=e.geometry.attributes.position,a=new Float32Array(3*s.count);for(let e=0,t=a.length;e<t;e+=9)a[e+0]=1,a[e+1]=0,a[e+2]=0,a[e+3]=0,a[e+4]=1,a[e+5]=0,a[e+6]=0,a[e+7]=0,a[e+8]=1;e.geometry.setAttribute("color",new(0,i.BufferAttribute)(a,3)),e.prepareGeometry(),me=!0}function Be(){requestAnimationFrame(Be);const e=D.enableDebugTelemetry;if(me){me=!1,J.updateMatrixWorld(),ee.updateMatrixWorld();const t=window.performance.now();he.debug.enabled=e,he.useGroups=D.useGroups,he.evaluate(J,ee,D.operation,te),D.useGroups?te.material=te.material.map((e=>we.get(e))):te.material=ie;const o=window.performance.now()-t;U.innerText=`${o.toFixed(3)}ms`,e&&(se.setEdges(he.debug.intersectionEdges),ae.setTriangles([...he.debug.triangleIntersectsA.getTrianglesAsArray(),...he.debug.triangleIntersectsA.getIntersectionsAsArray()]))}oe.visible=D.wireframe,J.visible=D.displayBrushes,ee.visible=D.displayBrushes,ne.castShadow=D.shadows,$.enabled=D.displayControls,$.visible=D.displayControls,se.visible=e&&D.displayIntersectionEdges,ae.visible=e&&D.displayTriangleIntersections,re.visible=D.displayBrush1BVH,le.visible=D.displayBrush2BVH}function Qe(e,t){if(void 0!==ye)if(fe.x=e/window.innerWidth*2-1,fe.y=-t/window.innerHeight*2+1,Me.setFromCamera(fe,N),Me.intersectObject(ye,!1,xe),xe.length>0){const e=xe[0].point;_e.position.copy(e),ge.point.copy(e);const t=(new i.Matrix3).getNormalMatrix(ye.matrixWorld),o=xe[0].face.normal.clone();o.applyNormalMatrix(t),o.multiplyScalar(10),o.add(xe[0].point),ge.normal.copy(xe[0].face.normal),_e.lookAt(o);const n=be.geometry.attributes.position;n.setXYZ(0,e.x,e.y,e.z),n.setXYZ(1,o.x,o.y,o.z),n.needsUpdate=!0,ge.intersects=!0,xe.length=0}else ge.intersects=!1}function Oe(){N.aspect=window.innerWidth/window.innerHeight,N.updateProjectionMatrix(),R.setSize(window.innerWidth,window.innerHeight)}function Xe(){R.render(j,N)}!async function(){U=document.getElementById("output"),R=new(0,i.WebGLRenderer)({antialias:!0}),R.setPixelRatio(window.devicePixelRatio),R.setSize(window.innerWidth,window.innerHeight),R.setAnimationLoop(Xe),R.setClearColor(1118481,1),R.shadowMap.enabled=!0,R.shadowMap.type=i.PCFSoftShadowMap,document.body.appendChild(R.domElement),j=new(0,i.Scene),ne=new(0,i.DirectionalLight)(16777215,3.5),ne.position.set(-20,2,3),j.add(ne,ne.target),j.add(new(0,i.AmbientLight)(11583173,.35));const e=ne.shadow.camera;let t;ne.castShadow=!1,ne.shadow.mapSize.setScalar(2048),ne.shadow.bias=1e-5,ne.shadow.normalBias=.01,e.left=e.bottom=-2.5,e.right=e.top=2.5,e.updateProjectionMatrix(),N=new(0,i.PerspectiveCamera)(75,window.innerWidth/window.innerHeight,.1,50),N.position.set(-10,0,4),N.far=100,N.updateProjectionMatrix(),K=new(0,Y.OrbitControls)(N,R.domElement),$=new w(N,R.domElement),$.setSize(.75),$.addEventListener("dragging-changed",(e=>{K.enabled=!e.value})),$.addEventListener("objectChange",(()=>{me=!0})),j.add($),he=new(0,k.Evaluator),he.attributes=["position","normal"],J=new(0,k.Brush)(new(0,i.BoxGeometry),new(0,k.GridMaterial)),ee=new(0,k.Brush)(new(0,i.BoxGeometry),new(0,k.GridMaterial)),ee.scale.setScalar(.5),J.scale.setScalar(.5),Ge(J,D.brush1Shape,D.brush1Complexity),Ge(ee,D.brush2Shape,D.brush2Complexity),J.material.opacity=.15,J.material.transparent=!0,J.material.depthWrite=!1,J.material.polygonOffset=!0,J.material.polygonOffsetFactor=.2,J.material.polygonOffsetUnits=.2,J.material.side=i.DoubleSide,J.material.premultipliedAlpha=!0,ee.material.opacity=.15,ee.material.transparent=!0,ee.material.depthWrite=!1,ee.material.polygonOffset=!0,ee.material.polygonOffsetFactor=.2,ee.material.polygonOffsetUnits=.2,ee.material.side=i.DoubleSide,ee.material.premultipliedAlpha=!0,ee.material.roughness=.25,ee.material.color.set(15277667),J.receiveShadow=!0,ee.receiveShadow=!0,$.attach(ee),j.add(J,ee),t=J.material.clone(),t.side=i.FrontSide,t.opacity=1,t.transparent=!1,t.depthWrite=!0,we.set(J.material,t),t=ee.material.clone(),t.side=i.FrontSide,t.opacity=1,t.transparent=!1,t.depthWrite=!0,we.set(ee.material,t),we.forEach(((e,t)=>{e.enableGrid=D.gridTexture,t.enableGrid=D.gridTexture})),te=new(0,i.Mesh)(new(0,i.BufferGeometry),new(0,i.MeshStandardMaterial)({flatShading:!1,polygonOffset:!0,polygonOffsetUnits:.1,polygonOffsetFactor:.1})),te.castShadow=!0,te.receiveShadow=!0,ie=te.material,j.add(te),oe=new(0,i.Mesh)(te.geometry,new(0,i.MeshBasicMaterial)({wireframe:!0,color:0,opacity:.15,transparent:!0})),j.add(oe),se=new(0,k.EdgesHelper),se.color.set(15277667),j.add(se),ae=new(0,k.TriangleSetHelper),ae.color.set(48340),j.add(ae),re=new(0,H.MeshBVHVisualizer)(J,20),le=new(0,H.MeshBVHVisualizer)(ee,20),j.add(re,le),re.update(),le.update(),ce=await(new(0,F.GLTFLoader)).setMeshoptDecoder(W.MeshoptDecoder).loadAsync("https://debkumarxr.github.io/webgl-test-three/poc/mesh/hip_MQ.glb"),de=ce.scene.children[0].geometry,de.computeVertexNormals(),pe=await(new(0,F.GLTFLoader)).setMeshoptDecoder(W.MeshoptDecoder).loadAsync("https://debkumarxr.github.io/webgl-test-three/poc/mesh/femur_MQ.glb"),ue=pe.scene.children[0].geometry,ue.computeVertexNormals(),q=new(0,s.GUI),q.add(D,"operation",{ADDITION:k.ADDITION,SUBTRACTION:k.SUBTRACTION,REVERSE_SUBTRACTION:k.REVERSE_SUBTRACTION,INTERSECTION:k.INTERSECTION,DIFFERENCE:k.DIFFERENCE,HOLLOW_INTERSECTION:k.HOLLOW_INTERSECTION,HOLLOW_SUBTRACTION:k.HOLLOW_SUBTRACTION}).onChange((e=>{me=!0,e===k.HOLLOW_INTERSECTION||e===k.HOLLOW_SUBTRACTION?we.forEach((e=>e.side=i.DoubleSide)):we.forEach((e=>e.side=i.FrontSide))})),q.add(D,"displayBrushes"),q.add(D,"displayControls"),q.add(D,"shadows"),q.add(D,"useGroups").onChange((()=>me=!0)),q.add(D,"vertexColors").onChange((e=>{J.material.vertexColors=e,J.material.needsUpdate=!0,ee.material.vertexColors=e,ee.material.needsUpdate=!0,we.forEach((t=>{t.vertexColors=e,t.needsUpdate=!0})),he.attributes=e?["color","position","normal"]:["position","normal"],me=!0})),q.add(D,"gridTexture").onChange((e=>{we.forEach(((t,o)=>{t.enableGrid=e,o.enableGrid=e}))})),q.add(D,"flatShading").onChange((e=>{J.material.flatShading=e,J.material.needsUpdate=!0,ee.material.flatShading=e,ee.material.needsUpdate=!0,we.forEach((t=>{t.flatShading=e,t.needsUpdate=!0}))}));const o=q.addFolder("brush 1");o.add(D,"brush1Shape",["sphere","box","cylinder","torus","torus knot","mesh"]).name("shape").onChange((e=>{Ge(J,e,D.brush1Complexity,de),re.update()})),o.add(D,"brush1Complexity",0,2).name("complexity").onChange((e=>{Ge(J,D.brush1Shape,e,de),re.update()})),o.addColor(D,"brush1Color").onChange((e=>{J.material.color.set(e),we.get(J.material).color.set(e)}));const n=q.addFolder("brush 2");n.add(D,"brush2Shape",["sphere","box","cylinder","torus","torus knot","mesh"]).name("shape").onChange((e=>{Ge(ee,e,D.brush2Complexity,ue),le.update()})),n.add(D,"brush2Complexity",0,2).name("complexity").onChange((e=>{Ge(ee,D.brush2Shape,e,ue),le.update()})),n.addColor(D,"brush2Color").onChange((e=>{ee.material.color.set(e),we.get(ee.material).color.set(e)}));const a=q.addFolder("debug");a.add(D,"enableDebugTelemetry").onChange((()=>me=!0)),a.add(D,"displayIntersectionEdges"),a.add(D,"displayTriangleIntersections"),a.add(D,"wireframe"),a.add(D,"displayBrush1BVH"),a.add(D,"displayBrush2BVH"),$.setMode("rotate"),window.addEventListener("resize",(function(){N.aspect=window.innerWidth/window.innerHeight,N.updateProjectionMatrix(),R.setSize(window.innerWidth,window.innerHeight)}),!1),window.addEventListener("keydown",(function(e){switch(e.code){case"KeyW":$.setMode("translate");break;case"KeyE":$.setMode("rotate");break;case"KeyR":$.setMode("scale")}})),q.add(D,"minScale",1,30),q.add(D,"maxScale",1,30),q.add(D,"rotate"),q.add(D,"clear"),function(){const e=new i.BufferGeometry;e.setFromPoints([new i.Vector3,new i.Vector3]),be=new i.Line(e,new i.LineBasicMaterial),j.add(be),async function(){(new(0,F.GLTFLoader)).load("/mesh/hip.glb",(function(e){ye=e.scene.children[0],ye.material=new i.MeshPhongMaterial({specular:1118481,color:11184810,shininess:25}),j.add(ye),ye.scale.multiplyScalar(10),ye.scale.set(.5,.5,.5),ye.position.set(0,10,0)}))}(),Me=new i.Raycaster,_e=new i.Mesh(new i.BoxGeometry(1,1,10),new i.MeshNormalMaterial),_e.visible=!1,j.add(_e),window.addEventListener("resize",Oe);let t=!1;function o(e){e.isPrimary&&Qe(e.clientX,e.clientY)}K.addEventListener("change",(function(){t=!0})),window.addEventListener("pointerdown",(function(){t=!1})),window.addEventListener("pointerup",(function(e){!1===t&&(Qe(e.clientX,e.clientY),ge.intersects&&function(){Ce.copy(ge.point),Te.copy(_e.rotation),D.rotate&&(Te.z=2*Math.random()*Math.PI);const e=D.minScale+Math.random()*(D.maxScale-D.minScale);Ae.set(e,e,e);const t=Pe.clone();t.color.setHex(16777215*Math.random());const o=new i.Mesh(new z(ye,Ce,Te,Ae),t);o.renderOrder=Ie.length,Ie.push(o),ye.attach(o)}())})),window.addEventListener("pointermove",o)}(),Be()}();
//# sourceMappingURL=simple.fddf0cf1.js.map
